#!/usr/bin/env bash

source "$DOTFILES_PATH/apps/de/bar/bar.bash" --just-vars

LAUNCHER_FONT="$BAR_FONT"
LAUNCHER_FONT_SIZE="$BAR_FONT_SIZE"
HIGHLIGHT_COLOR="$(xrq color4)"
HIGHLIGHT_FOREGROUND_COLOR="$(xrq background)"
BACKGROUND_COLOR=$(xrq background)
FOREGROUND_COLOR=$(xrq foreground)
GAP=$(xrq internalBorder)

# load a per-device config last so anything can be overridden
if [ -a "$EDFP/app-launcher" ]; then
	source "$EDFP/app-launcher"
fi

rofi \
	-combi-modi run,window \
	-show combi \
	-modi combi \
	-font "$LAUNCHER_FONT $LAUNCHER_FONT_SIZE" \
	-padding $GAP \
	-bw "$BORDER_WIDTH" \
	-color-enabled \
	-color-window "$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR" \
	-color-normal "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-color-normal "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-color-active "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-color-urgent "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-monitor -4 \
	-width 600 \
	"$@"
