#!/usr/bin/env bash

source "$DOTFILES_PATH/de/bar/bar.bash" --just-vars

LAUNCHER_FONT=$(xrdb -query              | sed -ne 's/.*font:\s*xft:\([^:]*\).*$/\1/p' | head -n 1)
LAUNCHER_FONT_SIZE=$(xrdb -query         | sed -ne 's/.*font:\s*xft:.*=\([0-9]*\).*$/\1/p' | head -n 1)
HIGHLIGHT_COLOR=$(xrdb -query            | sed -ne 's/.*color4*:\s*\(.*\)$/\1/p' | head -n 1)
HIGHLIGHT_FOREGROUND_COLOR=$(xrdb -query | sed -ne 's/.*background:\s*\(.*\)$/\1/p' | head -n 1)
BACKGROUND_COLOR=$(xrdb -query           | sed -ne 's/.*background:\s*\(.*\)$/\1/p' | head -n 1)
FOREGROUND_COLOR=$(xrdb -query           | sed -ne 's/.*foreground:\s*\(.*\)$/\1/p' | head -n 1)
GAP=$(xrdb -query                        | sed -ne 's/.*internalBorder:\s*\(.*\)$/\1/p' | head -n 1)

echo "$@" >> "$HOME/.sxhkd.log"

rofi \
	-combi-modi run,window \
	-show combi \
	-modi combi \
	-font "$LAUNCHER_FONT $LAUNCHER_FONT_SIZE" \
	-padding "$GAP" \
	-bw "$BORDER_WIDTH" \
	-color-enabled \
	-color-window "$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR" \
	-color-normal "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-color-normal "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-color-active "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-color-urgent "$BACKGROUND_COLOR","$FOREGROUND_COLOR","$BACKGROUND_COLOR","$HIGHLIGHT_COLOR","$HIGHLIGHT_FOREGROUND_COLOR" \
	-monitor -4 \
	-width 600 \
	"$@"
