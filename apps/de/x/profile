#!/bin/sh

if [[ -z "$XDG_CONFIG_HOME" ]]; then
	export XDG_CONFIG_HOME="$HOME/.config"
fi
if [[ -z "$DOTFILES_PATH" ]]; then
	export DOTFILES_PATH="$XDG_CONFIG_HOME/dotfiles"
fi

if command -v autorandr >/dev/null 2>&1; then
	autorandr -c
fi

echo "xprofile ($DOTFILES_PATH)" >> "$HOME/.xstartup_log"

# keyrepeat settings
xset r rate 250 80 &

# no screen blanking
# xset -dpms &
# xset s noblank &
# xset s off &

if command -v xss-lock >/dev/null 2>&1; then
	if command -v dm-tool >/dev/null 2>&1; then
		# xss-lock -- dm-tool switch-to-greeter &
		:
	fi
fi

if command -v redshift >/dev/null 2>&1; then
	redshift -r -l 39.0997:-94.5786 -t 6500K:3000K &
fi

if [ -f "$HOME/.xmodmap" ]; then
	xmodmap "$HOME/.xmodmap"
fi

if [ -f "$DOTFILES_PATH/apps/de/x/loadresources" ]; then
	"$DOTFILES_PATH/apps/de/x/loadresources"
fi

if command -v xcape >/dev/null 2>&1; then
	xcape -e 'Control_L=Escape' &
fi

if command -v autocutsel &> /dev/null; then
	autocutsel -fork &
fi

if command -v libinput-gestures-setup &> /dev/null; then
	libinput-gestures-setup start
fi

if [ -f "$HOME/.env_xprofile" ]; then
	source "$HOME/.env_xprofile"
fi
